# Инструкция по работе с чат-ботом "VKinder"

______________________________________________________________

## Знакомство с ботом

______________________________________________________________

Бот <b><u>Vkinder</u></b> разработан на основе задания приложенного в файле README.md.

Для удобства и структурирования данных, все токены, необходимые для активации бота находятся в файле .env.example.

Бот умеет:

- добавлять(удалять) пользователя в чёрный список;
- добавлять(удалять) пользователя в список избранных;
- искать пользователей по заданным критериям;
- добавлять URL трех фото из профиля анкеты, имеющие наибольшее кол-во лайков;
- выводить список избранных контактов;
- выводить список контактов добавленных в черный список
- искать пользователя по фотографиям, на которых он отмечен
______________________________________________________________

## Взаимодействие с ботом

______________________________________________________________
Для начала работы с ботом достаточно отправить в чат любое из перечисленных сообщений: 'привет', 'hi', 'hello',
'start', 'старт', 'начать'.

После отправки сообщения бот зарегистрирует пользователя в базе данных, представленной в файле <b><u>bd.py</b></u>. 
Схему базы данных можно посмотреть в файле <b><u>bd_schema.jpg</u></b>. После регистрации бот отправит 
сообщение пользователю сообщение с полученной информацией о пользователе и предложит начать работу с ботом, нажав кнопку
"Найти".

[menu](https://thumb.cloud.mail.ru/weblink/thumb/xw1/toV2/7DZuwgEmD)

###ВАЖНО! Перед тем как пользователь будет добавлен в базу данных бота, на основе полученных данных даты рождения в ВК 
методом "calculate_age" в файле model.py будет вычислен возраст. Если пользователь не достиг 18 лет, то регистрация 
пользователя не пройдет и бот отправит пользователю сообщение: 'Вы не можете использовать бота, т.к. ваш возраст меньше 
18 лет'.

## Кнопка Найти

________________________________________________________________

После отправки сообщения пользователя боту, программа предложит нажать на кнопку <b><u>Найти</u></b> для 
начала поиска пользователей с учетом Ваших данных со страницы VK. При нажатии на кнопку <b><u>Найти</u></b> бот начнет 
заполнять базу данных пользователями максимально подходящих Вам по возрасту, городу и противоположному полу.

[get_users](https://cloud.mail.ru/home/photo_2024-03-17_15-43-53.jpg?weblink=toV2%2F7DZuwgEmD) 

Воспользоваться кнопками <b><u>Чёрный список(меню)</u></b> и <b><u>Избранные(меню)</u></b> без поиска пользователей по 
Вашим данным, не удастся. Нажав преждевременно на кнопки <b><u>Чёрный список(меню)</u></b> и <b><u>Избранные(меню)</u></b>
пользователь получит сообщение, что для начала работы с данными клавишами необходимо заполнить базу данных подходящими 
пользователями (нажать кнопку <b><u>Найти</u></b>)

[favorite_none](https://cloud.mail.ru/public/F1HF/4UNnj6TJG)

[black_none](https://cloud.mail.ru/public/11oh/LH6yz8hUr) 

Все анкеты в боте обновляются раз в 30 дней.

После того как программа заполнит базу данных подходящими пользователями, в чате появится сообщение: "Закончилось 
заполнение базы найденными анкетами. В базе находится ... анкет(а/ы). Можете начинать поиск". Для контактов, которые 
подошли под критерии поиска в базу так же добавляются три наиболее популярные фотографии пользователя. Если в профиле 
всего одно фото и оно не кликабельно, то получить ссылку на фото не получится, поэтому такую анкету пропускаем. Начиная 
с этого этапа Вам будут доступны кнопки <b><u>Чёрный список(меню)</u></b> и <b><u>Избранные(меню)</u></b>.



## Кнопка Избранные(меню)

___________________________________________________________________________

При нажатии на кнопку <b><u>Избранные(меню)</u></b> бот отправит Вам сообщение о том, что Вы находитесь в меню "Избранные".

Вам будут доступны такие кнопки как:

- Добавить в избранные

Чтобы добавить пользователя в список Избранных Вам предстоит знать идентификатор пользователя. При удачном выполнении 
данного метода, Вы получите сообщение: 'Пользователь добавлен в список Избранных'.
При добавлении в список избранных, если анкета уже находится в списке, Вы получите сообщение:'Пользователь уже был ранее 
добавлен в список Избранных'.
Если пользователь был в "Чёрном списке", то при попытке добавить в списке Избранных Вы получите сообщение: 'Невозможно 
добавить пользователя в список Избранных пока он присутствует в Чёрном списке'.

- Удалить из избранных

При удалении пользователя из списка избранных, бот выдаст сообщение "Напишите цифрами id анкеты пользователя, которого вы 
хотите удалить из списка Избранных". Если такая анкета есть, то в чате появится сообщение "Анкета с id ... удалена из 
списка Избранных". Если в списке никого нет, то вы получите сообщение "Вы не можете кого-либо удалить, т.к. список Избранных 
пуст". Если в списке нет именно этой анкеты, то вы получите сообщение "Анкета с id ... не обнаружена в списке Избранных".


- Список избранных

При выборе этой кнопки, если в чёрном списке имеются анкеты, то программа выведет количество имеющихся анкет и их данные.
Если в списке Избранных нет анкет, то бот оповестит Вас об отсутствии анкет в списке Избранных соответствующим сообщением.

- Назад

При нажатии на кнопку <b><u>Назад</u></b> бот оповестит Вас о том, что Вы вернулись в основное меню сообщением:
"Вы в главном меню".


## Кнопка Чёрный список(меню)

___________________________________________________________________________
При нажатии на кнопку <b><u>Чёрный список(меню)</u></b> бот отправит Вам сообщение о том, что Вы находитесь в меню 
"Черный список".

Вам будут доступны такие кнопки как:

- Добавить в Чёрный список

Чтобы добавить пользователя в черный список Вам предстоит знать идентификатор пользователя. При удачном выполнении данного
метода, Вы получите сообщение: 'Пользователь добавлен в черный список'.
При добавлении в чёрный список, если анкета уже находится в списке, Вы получите сообщение:'Пользователь уже был ранее 
добавлен в черный список'.
Если пользователь был в "Избранных", то при попытке добавить в Чёрный список Вы получите сообщение: 'Невозможно добавить
пользователя в черный список пока он присутствует в списке избранных'.

- Удалить из Чёрного списка

При удалении пользователя из чёрного списка, бот выдаст сообщение "Напишите цифрами id анкеты пользователя, которого вы 
хотите удалить из черного списка". Если такая анкета есть, то в чате появится сообщение "Анкета с id ... удалена из 
черного списка". Если в списке никого нет, то вы получите сообщение "Вы не можете кого-либо удалить, т.к. черный список 
пуст". Если в списке нет именно этой анкеты, то вы получите сообщение "Анкета с id ... не обнаружена в черном списке".

- Чёрный список

При выборе этой кнопки, если в чёрном списке имеются анкеты, то программа выведет количество имеющихся анкет и их данные.
Если в чёрном списке нет анкет, то бот оповестит Вас об отсутствии анкет в чёрном списке.

- Назад

При нажатии на кнопку <b><u>Назад</u></b> бот оповестит Вас о том, что Вы вернулись в основное меню сообщением:
"Вы в главном меню".

При отправке боту сообщения не предусмотренного программой, бот отправит сообщение: "Извините, не понял вас."
