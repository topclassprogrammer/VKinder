# Инструкция по работе с чат-ботом "VKinder"


## Возможности бота


- заполняет локальную базу данных найденными пользователями по подходящим критериям, а именно - пол, возраст, город
- выдает результат поиска пользователей по подходящим критериям в виде Фамилия Имя, ссылка на ID анкеты и шесть фото, из которых первые три - это фото, имеющие наибольшее кол-во лайков в профиле анкеты, а другие три - это фото, имеющие наибольшее кол-во лайков, на которых отмечен пользователь.
- ставит/убирает лайк предложенным фото при поисковой выдаче
- добавляет/удаляет пользователя в список избранных;
- выводит список избранных контактов;
- добавляет/удаляет пользователя в чёрный список;
- выводит список контактов добавленных в черный список


## Перед первым запуском


В корне проекта необходимо создать файл .env и вставить в него содержимое из файла .env.example, подставляя свои значения. В данный файл записываются переменные окружения, включая токены проекта.


## Первое сообщение


Для начала работы с ботом достаточно отправить в чат любое сообщение.
После отправки сообщения бот зарегистрирует пользователя в локальной базе данных для подключения к которой используются параметры, указанные в файле .env.  
Схема базы данных находится в файле <b><u>db_schema.jpg</u></b>.  
Если пользователю бота менее 18 лет, то регистрация пользователя не пройдет и бот отправит пользователю сообщение: "Вы не можете использовать бота, т.к. ваш возраст менее 18 лет".  
Если пользователю бота 18 или более лет, то регистрация пользователя пройдет успешно и бот отправит пользователю сообщение с полученной информацией о пользователе и предложит начать работу с ботом путем нажатия на кнопку "Найти".


## Кнопка Найти


При первом нажатии на кнопку "Найти" бот начнет заполнять базу данных пользователями соответствующими вашему возрасту, городу и противоположному полу.  
Когда база данных заполнится, то выведется сообщение: "Закончилось заполнение базы найденными анкетами. В базе находится ... анкет(а/ы). Можете начинать поиск"

Воспользоваться кнопками <b><u>Лайк(поставить/убрать)</u></b>, <b><u>Чёрный список(меню)</u></b> и <b><u>Избранные(меню)</u></b> без поиска пользователей по вашим анкетным данным, не удастся. Нажав преждевременно на кнопки <b><u>Лайк(поставить/убрать)</u></b>, <b><u>Чёрный список(меню)</u></b> и <b><u>Избранные(меню)</u></b> пользователь получит сообщение, что для начала работы с данными клавишами необходимо заполнить базу данных подходящими пользователями.

После нажатия снова на кнопку "Найти" бот начнет выдавать из локальной базы данных по одной анкете за раз в следующем виде:  
Фамилия Имя  
vk.com/idXXXXXX  
Фото из профиля пользователя:  
1:  
ссылка  
2:  
ссылка  
3:  
ссылка  
Фото на которых отмечен пользователь:  
1:  
ссылка  
2:  
ссылка  
3:  
ссылка  

Анкетные данные пользователей в локальной базе данных обновляются раз в 30 дней.

Начиная с этого этапа Вам будут доступны кнопки <b><u>Лайк(поставить/убрать)</u></b>, <b><u>Чёрный список(меню)</u></b> и <b><u>Избранные(меню)</u></b>.


## Кнопка Лайк(поставить/убрать)


При нажатии на кнопку <b><u>Лайк(поставить/убрать)</u></b> бот отправит Вам сообщение "Из предложенных фото напишите цифрой какой фотографии вы хотите поставить/убрать лайк"  
Пользователь должен будет отправить порядковый номер фотографии, который бот ему отправил в поисковой выдаче.
Если пользователь отправил номер фотографии, который присутствует в поисковой выдаче, то в зависимости от того был проставлен лайк данной фотографии ранее или нет, будет выведено одно из следующих сообщений:
- поставлен лайк фотографии с номером ...  
- снят лайк с фотографии с номером ...  

Если пользователь отправил номер фотографии, которого нет в поисковой выдаче, то будет выведено сообщение: "Вы указали неверный номер фотографии. Нажмите на кнопку Лайк и попробуйте снова"


## Кнопка Избранные(меню)


При нажатии на кнопку <b><u>Избранные(меню)</u></b> бот отправит Вам сообщение о том, что Вы находитесь в меню "Избранные".

Вам будут доступны такие кнопки как:

- Добавить в избранные

Добавляет предлагаемую анкету в поиске в список избранных.  
При удачном выполнении данного метода, вы получите сообщение: "Пользователь добавлен в список избранных".  
При добавлении в список избранных, если анкета уже находится в списке, вы получите сообщение: "Пользователь уже был ранее добавлен в список избранных".  
Если пользователь был ранее добавлен в черный список, то при попытке добавить в список избранных вы получите сообщение: "Невозможно добавить пользователя в список избранных пока он присутствует в чёрном списке".

- Удалить из избранных

При удалении пользователя из списка избранных, бот выдаст сообщение "Напишите цифрами id анкеты пользователя, которого вы хотите удалить из списка избранных".  
Если такая анкета обнаружена, то в чате появится сообщение "Анкета с id ... удалена из списка избранных".  
Если в списке избранных нет данной анкеты, то вы получите сообщение "Анкета с id ... не обнаружена в списке избранных". 
Если в списке избранных никого нет, то вы получите сообщение "Вы не можете кого-либо удалить, т.к. список избранных пуст".  

- Список избранных

Если в списке избранных имеются анкеты, то программа выведет количество имеющихся анкет и их данные.
Если в списке избранных нет анкет, то в чате появится сообщение "В списке избранных никого нет."

- Назад

При нажатии на кнопку <b><u>Назад</u></b> бот оповестит Вас о том, что Вы вернулись в главное меню сообщением "Вы в главном меню".


## Кнопка Черный список(меню)


При нажатии на кнопку <b><u>Черный список(меню)</u></b> бот отправит Вам сообщение "Вы в меню черного списка".

Вам будут доступны такие кнопки как:

- Добавить в черный список

Добавляет предлагаемую анкету в поиске в черный список.  
При удачном выполнении данного метода, вы получите сообщение: "Пользователь добавлен в черный список".  
При добавлении в черный список, если анкета уже находится в списке, Вы получите сообщение: "Пользователь уже был ранее добавлен в черный список".  
Если пользователь был ранее добавлен в список избранных, то при попытке добавить в черный список вы получите сообщение: "Невозможно добавить пользователя в черный список пока он присутствует в списке избранных".

- Удалить из черного списка

При удалении пользователя из черного списка, бот выдаст сообщение "Напишите цифрами id анкеты пользователя, которого вы хотите удалить из черного списка".  
Если такая анкета обнаружена, то в чате появится сообщение "Анкета с id ... удалена из черного списка".  
Если в черной списке нет данной анкеты, то вы получите сообщение "Анкета с id ... не обнаружена в черном списке". 
Если в черном списке никого нет, то вы получите сообщение "Вы не можете кого-либо удалить, т.к. черный список пуст".  

- Черный список

Если в чёрном списке имеются анкеты, то программа выведет количество имеющихся анкет и их данные.
Если в черном списке нет анкет, то в чате появится сообщение "В черном списке никого нет".

- Назад

При нажатии на кнопку <b><u>Назад</u></b> бот оповестит Вас о том, что Вы вернулись в главное меню сообщением "Вы в главном меню".
